(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7702"],{"778d":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Setting"},[n("v-row",[n("v-toolbar-title",[n("h1",[t._v("Settings")]),n("h6",[t._v(" 导入成绩之后，设置人数和限制成绩,计算加权，再根据需求调整成绩限制和人数 ")])]),n("v-spacer"),n("v-btn",{attrs:{color:"secondary"},on:{click:t.twoWaySelection}},[n("v-icon",[t._v(" gavel")]),t._v(" Calculation weighting")],1)],1),n("v-divider"),n("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:t.limitRules,counter:2,label:"限制人数",required:""},model:{value:t.user.upper_limit,callback:function(e){t.$set(t.user,"upper_limit",e)},expression:"user.upper_limit"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:t.markRules,counter:3,label:"成绩限制",required:""},model:{value:t.user.mark_limit,callback:function(e){t.$set(t.user,"mark_limit",e)},expression:"user.mark_limit"}})],1),n("v-col",{staticClass:"mx-auto",attrs:{cols:"12",md:"4"}},[n("v-btn",{staticClass:"mx-auto",attrs:{color:"secondary",disabled:!t.valid},on:{click:t.submit}},[n("v-icon",[t._v("cached")]),t._v("update ")],1)],1)],1),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("count")]),n("th",{staticClass:"text-left"},[t._v("学号")]),n("th",{staticClass:"text-left"},[t._v("name")]),n("th",{staticClass:"text-left"},[t._v("score")])])]),n("tbody",t._l(t.students,(function(e,r){return n("tr",{key:e.id},[n("td",[t._v(t._s(r+1))]),n("td",[t._v(t._s(e.user.number))]),n("td",[t._v(t._s(e.user.name))]),n("td",[t._v(t._s(e.grade))])])})),0)]},proxy:!0}])})],1)],1)],1)},s=[],a=(n("96cf"),n("1da1")),i=n("5530"),u=n("01b4"),c=n("2f62"),l=n("65b7"),o={name:"Setting",data:function(){return{students:[],valid:!1,limitRules:[function(t){return/[0-9]{1,2}/.test(t)||"必须是1-2位数字"},function(t){return t<100||"成绩必须小于等于100"}],markRules:[function(t){return/[0-9]{1,3}/.test(t)||"成绩必须是数字"},function(t){return t<=100||"成绩必须小于等于100"}]}},computed:Object(i["a"])({},Object(c["b"])(["user"])),watch:{},components:{},created:function(){var t=this;this.$store.dispatch(u["c"]).then((function(){null!=t.user.mark_limit&&t.qualifiedStudents()}))},mounted:function(){},methods:{submit:function(){var t=this;this.valid&&this.$store.dispatch(u["g"],this.user).then((function(){t.qualifiedStudents()})).then((function(){t.$router.go(0)}))},twoWaySelection:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].get("teacher/start");case 2:n=e.sent,t.students=n.data.students;case 4:case"end":return e.stop()}}),e)})))()},qualifiedStudents:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.user.mark_limit){e.next=5;break}return e.next=3,l["a"].get("teacher/qualified");case 3:n=e.sent,t.students=n.data.students;case 5:case"end":return e.stop()}}),e)})))()}}},d=o,v=n("2877"),m=Object(v["a"])(d,r,s,!1,null,"75fc89d7",null);e["default"]=m.exports}}]);