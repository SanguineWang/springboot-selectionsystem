(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6261c34"],{"44d2":function(e,t,n){var r=n("b622"),c=n("7c73"),i=n("9bf2"),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&i.f(a,s,{configurable:!0,value:c(null)}),e.exports=function(e){a[s][e]=!0}},"7db0":function(e,t,n){"use strict";var r=n("23e7"),c=n("b727").find,i=n("44d2"),s=n("ae40"),a="find",o=!0,u=s(a);a in[]&&Array(1)[a]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!u},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},b0c0:function(e,t,n){var r=n("83ab"),c=n("9bf2").f,i=Function.prototype,s=i.toString,a=/^\s*function ([^ (]*)/,o="name";r&&!(o in i)&&c(i,o,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(e){return""}}})},ee0a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("h1",[e._v("选择导师")]),n("v-spacer"),n("v-btn",{attrs:{color:"secondary"},on:{click:e.logout}},[n("v-icon",[e._v("mdi-account-outline")]),e._v(" "+e._s(e.mine.user.name)+" logout")],1)],1),n("v-divider"),n("v-col",{attrs:{cols:"6"}},[n("h3",[e._v("我的导师："+e._s(e.myTeacher))])]),n("v-col",{attrs:{cols:"6"}},[n("h3",[e._v("我的方向：")]),e._l(e.directionChoose,(function(t,r){return[n("v-chip",{key:"direcion"+r,staticClass:"ma-2",attrs:{color:"primary",outlined:"",pill:""}},[e._v(" "+e._s(t.name)+" "),n("v-icon",{attrs:{right:""}},[e._v("star_border")])],1)]}))],2),n("br"),n("v-col",{attrs:{cols:"12"}},[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("count")]),n("th",{staticClass:"text-left"},[e._v("工号")]),n("th",{staticClass:"text-left"},[e._v("姓名")]),n("th",{staticClass:"text-left"},[e._v("成绩限制")]),n("th",{staticClass:"text-left"},[e._v("总名额")]),n("th",{staticClass:"text-left"},[e._v("已选人数")]),n("th",{staticClass:"text-left"},[e._v("检查资格")]),n("th",{staticClass:"text-left"},[e._v("选择方向")]),n("th",{staticClass:"text-left"},[e._v("选择导师")])])]),n("tbody",e._l(e.teachers,(function(t,r){return n("tr",{key:t.id},[n("td",[e._v(e._s(r+1))]),n("td",[e._v(e._s(t.user.number))]),n("td",[e._v(e._s(t.user.name))]),n("td",[e._v(e._s(t.mark_limit))]),n("td",[e._v(e._s(t.upper_limit))]),n("td",[e._v(e._s(e.selected))]),n("td",[n("v-btn",{attrs:{color:"secondary"},on:{click:function(n){return e.check(t.id)}}},[e._v(" Check Auth")])],1),n("td",[e._l(e.directions,(function(t,r){return[n("label",{key:"lab-"+r},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedD,expression:"selectedD"}],key:"input-"+r,attrs:{type:"checkbox"},domProps:{value:{id:t.id},checked:Array.isArray(e.selectedD)?e._i(e.selectedD,{id:t.id})>-1:e.selectedD},on:{change:function(n){var r=e.selectedD,c=n.target,i=!!c.checked;if(Array.isArray(r)){var s={id:t.id},a=e._i(r,s);c.checked?a<0&&(e.selectedD=r.concat([s])):a>-1&&(e.selectedD=r.slice(0,a).concat(r.slice(a+1)))}else e.selectedD=i}}}),e._v(" "+e._s(t.name)+" ")]),n("br",{key:"br-"+r})]}))],2),n("td",[n("v-btn",{attrs:{color:"secondary",disabled:!e.canPick},on:{click:function(n){return e.pick(t.id)}}},[e._v(" pick")])],1)])})),0)]},proxy:!0}])})],1),n("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[n("v-card",[n("v-card-title",[n("h3",[e._v("Weighted score : "+e._s(e.mine.grade))]),n("v-spacer"),n("v-btn",{attrs:{color:"black darken-1",text:""},on:{click:function(t){e.isShow=!e.isShow}}},[n("v-icon",[e._v(" mdi-close")])],1)],1),n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("count")]),n("th",{staticClass:"text-left"},[e._v("课程名")]),n("th",{staticClass:"text-left"},[e._v("学分")]),n("th",{staticClass:"text-left"},[e._v("成绩")])])]),n("tbody",e._l(e.electives,(function(t,r){return n("tr",{key:"check"+t.id},[n("td",[e._v(e._s(r+1))]),n("td",[e._v(e._s(t.course.name))]),n("td",[e._v(e._s(t.course.weight))]),n("td",[e._v(e._s(t.grade))])])})),0)]},proxy:!0}])})],1)],1)],1)},c=[],i=(n("7db0"),n("b0c0"),n("96cf"),n("1da1")),s=n("01b4"),a=n("65b7"),o={data:function(){return{canPick:!1,isShow:!1,mine:{user:{name:""}},tid:null,teachers:[],directions:[],directionChoose:[],electives:[],selected:0,selectedD:[]}},computed:{myTeacher:function(){var e=this.mine.teacher;return null==e?"无":e.user.name}},methods:{pick:function(e){this.pickTeacher(e),this.ChooseDirection(e,this.selectedD)},check:function(e){this.getSheetAndSelected(e),this.getTeachersDirections(e),this.isShow=!this.isShow;var t=this.mine.grade>=this.teachers.find((function(t){return t.id==e})).mark_limit;console.log(t);var n=this.selected<=this.teachers.find((function(t){return t.id==e})).upper_limit;console.log(n);var r=null==this.mine.teacher;this.canPick=t&&n&&r,console.log(this.canPick)},logout:function(){var e=this;this.$store.dispatch(s["i"]).then((function(){e.$router.go(0)}))},getSheetAndSelected:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a["a"].get("student/teachers/".concat(e));case 2:r=n.sent,t.selected=r.data.selected,t.electives=r.data.electives;case 5:case"end":return n.stop()}}),n)})))()},getMine:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get("student/myInfo");case 2:n=t.sent,e.mine=n.data.mine;case 4:case"end":return t.stop()}}),t)})))()},getTeachers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get("student/teachers");case 2:n=t.sent,e.teachers=n.data.teachers;case 4:case"end":return t.stop()}}),t)})))()},getTeachersDirections:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a["a"].get("student/teachers/".concat(e,"/directions"));case 2:r=n.sent,t.directions=r.data.directions;case 4:case"end":return n.stop()}}),n)})))()},pickTeacher:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a["a"].get("student/teachers/".concat(e,"/pick"));case 2:r=n.sent,t.mine=r.data.mine;case 4:case"end":return n.stop()}}),n)})))()},ChooseDirection:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("student/myDirections",t);case 2:r=e.sent,n.directionChoose=r.data.chooseDirections;case 4:case"end":return e.stop()}}),e)})))()},getMydirections:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get("student/myDirections");case 2:n=t.sent,e.directionChoose=n.data.chooseDirections;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.getMine(),this.getTeachers().then((function(){})),this.getMydirections()}},u=o,l=n("2877"),d=Object(l["a"])(u,r,c,!1,null,null,null);t["default"]=d.exports}}]);